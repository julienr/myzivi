{% extends "base.html" %}
{% load staticfiles %}

{% block javascript %}
<script type="text/javascript"
        src="{% static 'js/map.js' %}"></script>

<script type="text/template" id="workspec_template">
    <a href="<% print(url_from_phid(raw_phid)); %>"><%= shortname %></a>
</script>

<script type="text/template" id="infowindow_template">
    <a href="<% print(url_from_phid(raw_phid)); %>"><%= shortname %></a>
</script>

<script type="text/javascript">
    // TODO: Do clean bootstraping http://backbonejs.org/#FAQ-bootstrap
    WORKSPEC_API = "{% url api_dispatch_list api_name="v1" resource_name="workspec" %}";
    ADDRESS_API = "{% url api_dispatch_list api_name="v1" resource_name="address" %}";
    SEARCH_API = "{% url api_dispatch_list api_name="v1" resource_name="search" %}";

    var _workspecs = JSON.parse("{{ workspecs|escapejs }}");
    var _addresses = JSON.parse("{{ addresses|escapejs }}");
    var App = {};
    $(initMap(_workspecs, _addresses, App));
</script>
{% endblock %}

{% block content %}
<div class="hero-unit">
    <h1>Welcome !</h1>
    <p><b>This is a search engine for swiss civil service jobs. It is an alternative to the official search engine, <a href="https://www.eis.zivi.admin.ch/ZiviEis/default.aspx?lang=fr">EIS/SIA</a>
    </p>
    <p>It allows you to search using a map. By zooming on your region, you can see the jobs proposals that are close to you (or to where you want to work).</p>
    <p>
        <a class="btn btn-primary btn-large" href="#map_canvas">
        Get started
        </a>
    </p>
</div>
<div class="row-fluid">
    <!--<div class="span3">
    <ul class="nav nav-list">
    <li class="nav-header">Filters</li>
    <form action="{% url zivimap.views.index %}" method="GET">
        {{ search_form.as_ul }}
        <input type="submit" value="Search" />
    </form>

    </ul>
    </div>-->
    <div class="span1">&nbsp;</div>
    <div class="span10">
        <div id="map_canvas" style="width:100%; height:100%"></div>
    </div>
    <div class="span1">&nbsp;</div>
</div>

{% endblock %}
